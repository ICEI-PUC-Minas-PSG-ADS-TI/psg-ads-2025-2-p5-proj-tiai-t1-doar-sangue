<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil - Give Life</title>
</head>

<body>
  <!-- ===== CONTEÚDO PRINCIPAL ===== -->
  <main>
    <div class="layout">

      <!-- ===== SIDEBAR ===== -->
      <aside class="sidebar">
        <img src="/Logo GiveLife.png" class="logo" alt="Logo Give Life">

        <h2>Minha Conta!</h2>
        <p class="descricao">Gerencie seus dados e configurações.</p>

        <!-- Navegação principal -->
        <div class="sidebar-section">
          <h3 class="sidebar-title">Navegação</h3>

          <ul class="sidebar-menu">
            <li><a routerLink="/doador" class="sidebar-link">Página Inicial</a></li>
            <li (click)="scrollTo('dados')">Dados Pessoais</li>
            <li (click)="scrollTo('requisitos')">Requisitos para Doação</li>
            <li (click)="scrollTo('seguranca')">Segurança</li>
          </ul>
        </div>

        <a class="btn-sair" (click)="sairDaConta()">Sair da Conta</a>
      </aside>

      <!-- ===== ÁREA DE CARDS ===== -->
      <div class="conteudo">

        <!-- ============= CARD 1: DADOS PESSOAIS ============= -->
        <section id="dados" class="card">
          <h3>Dados Pessoais</h3>

          <div class="form-group">
            <label>Nome Completo</label>
            <input type="text" [(ngModel)]="usuario.nome" [placeholder]="usuario.nome" [readonly]="!editandoDados">
          </div>

          <div class="form-group">
            <label>Email</label>
            <input type="email" [(ngModel)]="usuario.email" [placeholder]="usuario.email" [readonly]="!editandoDados">
          </div>

          <div class="form-group">
            <label>Telefone</label>
            <input type="text" [(ngModel)]="usuario.telefone" [placeholder]="usuario.telefone" [readonly]="!editandoDados">
          </div>

          <div class="form-group">
            <label>Sexo</label>
            <select [(ngModel)]="usuario.sexo"
                    name="sexo"
                    [disabled]="!editandoDados"
                    required>
              <option value="" disabled>Selecione seu sexo</option>
              <option value="Masculino">Masculino</option>
              <option value="Feminino">Feminino</option>
            </select>
          </div>

          <div class="botoes-edicao">
            <button *ngIf="!editandoDados" class="btn-editar" (click)="ativarEdicao()">Editar</button>
            <button *ngIf="editandoDados" class="btn-salvar" (click)="salvarDados()">Salvar</button>
            <button *ngIf="editandoDados" class="btn-cancelar" (click)="cancelarEdicao()">Cancelar</button>
          </div>
        </section>

        <!-- ============= CARD 2: CHECKLIST DE REQUISITOS ============= -->
        <section id="requisitos" class="card">
          <h3>Requisitos para Doação</h3>

          <div class="checklist">
            <label class="check-item">
              <input type="checkbox" [(ngModel)]="checklist.idade">
              Tenho entre 16 e 69 anos.
            </label>

            <label class="check-item">
              <input type="checkbox" [(ngModel)]="checklist.peso">
              Peso mínimo de 50 kg.
            </label>

            <label class="check-item">
              <input type="checkbox" [(ngModel)]="checklist.saude">
              Estou em boas condições de saúde.
            </label>

            <label class="check-item">
              <input type="checkbox" [(ngModel)]="checklist.descanso">
              Dormi pelo menos 6 horas na última noite.
            </label>

            <label class="check-item">
              <input type="checkbox" [(ngModel)]="checklist.alimentacao">
              Fiz uma refeição leve antes da doação.
            </label>

            <div class="botoes-edicao">
              <button class="btn-editar" (click)="confirmarChecklist()">Confirmar Requisitos</button>
            </div>

          </div>
        </section>

        <!-- ============= CARD 3: SEGURANÇA ============= -->
        <section id="seguranca" class="card">
          <h3>Segurança</h3>

          <div class="secao-redefinir">
            <h4>Redefinir Senha por Email</h4>
            <p class="descricao-pequena">
              Enviaremos um link de redefinição para o seu email cadastrado.
            </p>

            <div class="form-group">
              <label>Email</label>
              <input type="email"
                     [value]="usuario.email"
                     readonly>
            </div>

            <div class="botoes-edicao">
              <button class="btn-editar" (click)="solicitarRedefinirSenha()">
                Enviar Link de Redefinição
              </button>
            </div>
          </div>

          <div class="secao-excluir">
            <h4>Zona de Perigo</h4>
            <p class="descricao-pequena aviso-perigo">
              ⚠️ Esta ação é permanente e não pode ser desfeita.
            </p>

            <div class="botoes-edicao">
              <button class="btn-cancelar" (click)="excluirConta()">Excluir Conta Permanentemente</button>
            </div>
          </div>      
        </section>
      </div>
    </div>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer>
    <p>© 2024 Give Life - Todos os direitos reservados</p>
  </footer>

</body>

</html>
