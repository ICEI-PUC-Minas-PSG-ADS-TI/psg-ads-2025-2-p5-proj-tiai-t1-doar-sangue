<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastro de Posto de Coleta - Give Life</title>

  <!-- Fonte -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- CSS GLOBAL -->
  <link rel="stylesheet" href="../../../styles.css">
</head>

<body>
  <main>
    <section class="registration-section">
      <div class="container">

        <!-- LADO ESQUERDO -->
        <div class="left-section">
          <img src="/Logo GiveLife.png" alt="Logo Give Life" class="logo">
          <h2>Olá de Novo</h2>
          <p>Já possui uma conta?</p>
          <a routerLink="/login" class="btn-login">Login</a>
        </div>

        <!-- FORMULÁRIO -->
        <div class="registration-form">
          <h2>Cadastro de Posto de Coleta</h2>

          <form (ngSubmit)="cadastrar()" #form="ngForm" novalidate>

            <!-- NOME -->
            <label>Nome do Posto</label>
            <input type="text"
                   [(ngModel)]="posto.nome"
                   name="nome"
                   placeholder="Digite o nome do posto"
                   required
                   minlength="3"
                   #nome="ngModel">
            <div class="error" *ngIf="nome.invalid && nome.touched">
              O nome deve ter pelo menos 3 caracteres.
            </div>

            <!-- EMAIL -->
            <label>E-mail</label>
            <input type="email"
                   [(ngModel)]="posto.email"
                   name="email"
                   placeholder="Digite o e-mail"
                   required
                   email
                   #email="ngModel">
            <div class="error" *ngIf="email.invalid && email.touched">
              Digite um e-mail válido.
            </div>

            <!-- Telefone / Contato -->
            <label>Telefone</label>
            <input type="text"
                   [(ngModel)]="posto.contato"
                   name="contato"
                   placeholder="(DDD) 99999-9999"
                   required
                   pattern="^\(\d{2}\) \d{5}-\d{4}$"
                   (input)="formatarTelefone($event)"
                   maxlength="15"
                   #contato="ngModel">
            <div class="error" *ngIf="contato.invalid && contato.touched">
              Telefone deve estar no formato (DDD) 99999-9999.
            </div>

            <!-- ENDEREÇO -->
            <label>Endereço</label>
            <input type="text"
                   [(ngModel)]="posto.endereco"
                   name="endereco"
                   placeholder="Digite o endereço"
                   required
                   #endereco="ngModel">
            <div class="error" *ngIf="endereco.invalid && endereco.touched">
              O endereço é obrigatório.
            </div>

            <!-- HORÁRIO -->
            <label>Horário de Funcionamento</label>
            <input type="text"
                   [(ngModel)]="posto.horarioFuncionamento"
                   name="horarioFuncionamento"
                   placeholder="Ex: Seg-Sex 08h às 17h"
                   required
                   #horario="ngModel">
            <div class="error" *ngIf="horario.invalid && horario.touched">
              O horário é obrigatório.
            </div>

            <!-- CNPJ -->
            <label>CNPJ</label>
            <input [(ngModel)]="posto.cnpj"
                   name="cnpj"
                   placeholder="00.000.000/0000-00"
                   required
                   pattern="^\d{2}\.\d{3}\.\d{3}/\d{4}-\d{2}$"
                   (input)="formatarCnpj()"
                   maxlength="18"
                   #cnpj="ngModel">
            <div class="error" *ngIf="cnpj.invalid && cnpj.touched">
              CNPJ deve estar no formato 00.000.000/0000-00.
            </div>

            <!-- SENHA -->
            <label>Senha</label>
            <div class="password-container">
              <input [type]="mostrarSenha ? 'text' : 'password'"
                     [(ngModel)]="posto.senha"
                     name="senha"
                     placeholder="Crie uma senha"
                     required
                     pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*\d).{8,}$"
                     #senha="ngModel">
              <button type="button" class="toggle-visibility" (click)="mostrarSenha = !mostrarSenha">
                <img *ngIf="!mostrarSenha" src="eye.svg" alt="Mostrar senha">
                <img *ngIf="mostrarSenha" src="eye-off.svg" alt="Ocultar senha">
              </button>
            </div>
            <div class="error" *ngIf="senha.invalid && senha.touched">
              A senha deve ter pelo menos 8 caracteres, com letra maiúscula, minúscula e número.
            </div>

            <!-- CONFIRMAR SENHA -->
            <label>Confirme a Senha</label>
            <div class="password-container">
              <input [type]="mostrarConfirmarSenha ? 'text' : 'password'"
                     [(ngModel)]="confirmarSenha"
                     name="confirmarSenha"
                     required
                     #confirmarSenhaCampo="ngModel"
                     (ngModelChange)="verificarSenhas()">
              <button type="button" class="toggle-visibility" (click)="mostrarConfirmarSenha = !mostrarConfirmarSenha">
                <img *ngIf="!mostrarConfirmarSenha" src="eye.svg" alt="Mostrar senha">
                <img *ngIf="mostrarConfirmarSenha" src="eye-off.svg" alt="Ocultar senha">
              </button>
            </div>
            <div class="error" *ngIf="posto.senha !== confirmarSenha && confirmarSenhaCampo.touched">
              As senhas não coincidem.
            </div>

            <button type="submit"
                    class="btn-primary"
                    [disabled]="form.invalid || posto.senha !== confirmarSenha || carregando">
              <span *ngIf="!carregando">Cadastrar</span>
              <span *ngIf="carregando" class="spinner"></span>
            </button>

            <p>Já tem uma conta? <a routerLink="/login">Entre aqui</a></p>
          </form>
        </div>

      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2024 Give Life - Todos os direitos reservados</p>
  </footer>
</body>
</html>
